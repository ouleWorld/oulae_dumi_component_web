"use strict";(self.webpackChunkoulae_dumi_component_web=self.webpackChunkoulae_dumi_component_web||[]).push([[923],{34576:function(H,R,l){l.r(R),l.d(R,{default:function(){return x}});var T=l(27424),j=l.n(T),Z=l(42122),M=l.n(Z),a=l(62435),E=l(14570),B=l(64236),G=l(42076),W=l(90482),b=l(92671),K=l(86074),F=M()({},b);function x(){var y=(0,E.pC)(),k=(0,a.useState)(!0),L=j()(k,2),$=L[0],O=L[1],U=(0,a.useRef)(E.m8.location.pathname);return(0,a.useEffect)(function(){return E.m8.listen(function(S){S.location.pathname!==U.current&&(U.current=S.location.pathname,O(!0),document.documentElement.scrollTo(0,0))})},[]),(0,K.jsx)(B.D.Provider,{value:{pkg:{name:"oulae_dumi_component_web",description:"A static site based on dumi",version:"0.0.1",license:"MIT",authors:[]},entryExports:F,demos:G.DE,components:G.wx,locales:W.k,loading:$,setLoading:O,themeConfig:{footer:'Copyright \xA9 2023 | Powered by <a href="https://d.umijs.org" target="_blank" rel="noreferrer">dumi</a>',prefersColor:{default:"light",switch:!0},name:"oulae_dumi_component_web"}},children:y})}},92671:function(H,R,l){l.r(R),l.d(R,{RelationComponent:function(){return ne}});var T=l(90783),j=l(22920),Z=l(68775),M=l(62435),a=l(86074),E=T.Z.Option,B=function(e){var o=e.data,s=e.pos,m=e.onChange,i=e.keyMap,g=e.handleMap,c=e.valueMap,h=e.defaultValueStatus,u=o.key,v=o.op,f=o.value,p=function(t){typeof m=="function"&&m(t)},N=function(t){p({key:t})},I=function(t){p({op:t})},V=function(t){p({value:t.target.value})},C=function(t){p({value:t})},r=function(){var t;return u?(t=c[u])!==null&&t!==void 0&&t.length?(0,a.jsx)(j.Z.Item,{name:["relations_validate",s,"value_value"],initialValue:f,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u503C"}],style:{marginRight:"6px"},children:(0,a.jsx)(T.Z,{placeholder:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u503C",onChange:C,children:c[u].map(function(_,A){return(0,a.jsx)(E,{value:_.value,children:_.label},A)})})}):(0,a.jsx)(j.Z.Item,{name:["relations_validate",s,"value_value"],initialValue:f,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u64CD\u4F5C\u503C"}],style:{marginRight:"6px"},children:(0,a.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165\u64CD\u4F5C\u503C",value:f,onChange:V})}):null};return(0,M.useEffect)(function(){h&&p({key:i[0].value,op:g[0].value})},[]),(0,a.jsxs)("div",{className:"term",children:[(0,a.jsx)("span",{className:"element",children:(0,a.jsx)(j.Z.Item,{name:["relations_validate",s,"element_value"],initialValue:u,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6761\u4EF6"}],style:{marginRight:"6px"},children:(0,a.jsx)(T.Z,{placeholder:"\u8BF7\u9009\u62E9\u6761\u4EF6\u9879",onChange:N,children:i.map(function(n,t){return(0,a.jsx)(E,{value:n.value,children:n.label},t)})})})}),(0,a.jsx)("span",{className:"comparison",children:(0,a.jsx)(j.Z.Item,{name:["relations_validate",s,"comparison_value"],initialValue:v,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5173\u7CFB\u7B26"}],style:{marginRight:"6px"},children:(0,a.jsx)(T.Z,{placeholder:"\u8BF7\u9009\u62E9\u5173\u7CFB\u7B26",onChange:I,children:g.map(function(n,t){return(0,a.jsx)(E,{value:n.value,children:n.label},t)})})})}),(0,a.jsx)("span",{className:"value",children:r()})]})};B.defaultProps={defaultValueStatus:!1};var G=B,W=l(27424),b=l.n(W),K=l(12902),F=l(42122),x=l.n(F),y=l(76260),k=function(e){var o=e.data,s=e.pos,m=e.setElementTerm,i=e.onDeleteTerm,g=e.onTermChange,c=function(){typeof i=="function"&&i(s,o)},h=function(v){typeof g=="function"&&g(s,x()(x()({},o),v))};return typeof m!="function"?(console.error("setElementTerm \u5C5E\u6027\u5FC5\u987B\u8BBE\u7F6E\uFF0C\u4E14\u5FC5\u987B\u662F\u8FD4\u56DE ReactElement \u7684Function"),null):(0,a.jsxs)("div",{className:"vui-relation-item",children:[m(o,s,h),(0,a.jsx)(y.ZP,{type:"primary",danger:!0,onClick:c,className:"delete-term",children:"\u5220\u9664"})]})},L=k,$=T.Z.Option,O="_",U=[{label:"\u6216",value:"and"},{label:"\u4E14",value:"or"}],S=function d(e){var o=e.data,s=e.pos,m=e.setElementTerm,i=e.onAddGroup,g=e.onAddTerm,c=e.onOpsChange,h=e.onDeleteTerm,u=e.onTermChange,v=function(){var n=z(s),t=o.children;return n.push(String(t.length-1)),n.join(O)},f=function(n){typeof c=="function"&&c(s,x()(x()({},o),{},{ops:n}))},p=function(){var n={},t=v();typeof g=="function"&&g(t,n)},N=function(){var n={ops:P.AND,children:[{}]},t=v();typeof i=="function"&&i(t,n)},I=o.children,V=o.ops,C=V||P.AND;return console.log("RelationGroup data: ",o),(0,a.jsxs)("div",{className:"vui-relation-group",children:[(0,a.jsx)("div",{className:"relational",children:(0,a.jsx)(T.Z,{className:"relation-sign",value:C,onChange:f,children:U.map(function(r,n){return(0,a.jsx)($,{value:r.value,children:r.label},n)})})}),(0,a.jsxs)("div",{className:"conditions",children:[I.map(function(r,n){var t=r,_=t.children,A=J(s,n);return _&&_.length?(0,a.jsx)(d,{pos:A,data:r,setElementTerm:m,onAddGroup:i,onAddTerm:g,onOpsChange:c,onDeleteTerm:h,onTermChange:u},A):(0,a.jsx)(L,{pos:A,data:r,setElementTerm:m,onDeleteTerm:h,onTermChange:u},A)}),(0,a.jsxs)("div",{className:"operators",children:[(0,a.jsx)(y.ZP,{type:"primary",className:"add-term",onClick:p,children:"\u52A0\u6761\u4EF6"}),(0,a.jsx)(y.ZP,{type:"primary",className:"add-group",onClick:N,children:"\u52A0\u6761\u4EF6\u7EC4"})]})]})]})},J=function(e,o){return e?"".concat(e).concat(O).concat(o):String(o)},z=function(e){return e&&e.split(O)||[]},Q=S,P;(function(d){d.AND="and",d.OR="or"})(P||(P={}));var D;(function(d){d.addGroup="addGroup",d.addTerm="addTerm",d.changeOps="changeOps",d.deleteTerm="deleteTerm",d.changeTerm="changeTerm"})(D||(D={}));var X={ops:P.AND,children:[{}]},Y=function(e){var o=e.value,s=e.onValueChange,m=e.setElementTerm,i=e.fromItemOnChange,g=(0,M.useState)(o||X),c=b()(g,2),h=c[0],u=c[1];(0,M.useEffect)(function(){i&&i(h)},[h]);var v=function(r,n,t){var _=w(h,r,t,n);typeof s=="function"&&s(_,t,n),u(_)},f=function(r,n){v(r,n,D.addGroup)},p=function(r,n){v(r,n,D.addTerm)},N=function(r,n){v(r,n,D.changeOps)},I=function(r,n){v(r,n,D.deleteTerm)},V=function(r,n){v(r,n,D.changeTerm)};return(0,a.jsx)("div",{className:"vui-relation-tree",children:(0,a.jsx)(Q,{pos:"",data:h,setElementTerm:m,onAddGroup:f,onAddTerm:p,onOpsChange:N,onDeleteTerm:I,onTermChange:V})})},w=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0;if(!o)return m;var i=z(o),g=i.length-1;return(0,K.ZP)(e,function(c){var h={data:c,idx:0},u=c.children||[];i.forEach(function(v,f){var p=Number(v);if(f===g)switch(s){case"addTerm":case"addGroup":u.splice(p+1,0,m);break;case"deleteTerm":u.splice(p,1),u.length||h.data.splice(h.idx,1);break;default:u[p]=m}else h={data:u,idx:p},u=u[p]&&u[p].children||[]})})},q=Y,ee=function(e){var o=e.keyMap,s=e.handleMap,m=e.value,i=e.valueMap,g=e.onValueChange,c=function(u,v,f){return(0,a.jsx)(G,{keyMap:o,handleMap:s,valueMap:i,pos:v,data:u,onChange:f})};return(0,a.jsx)(q,{value:m,onValueChange:g,fromItemOnChange:e.onChange,setElementTerm:c})},ne=ee}}]);
