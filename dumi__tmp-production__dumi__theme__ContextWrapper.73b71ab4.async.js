"use strict";(self.webpackChunkoulae_dumi_component_web=self.webpackChunkoulae_dumi_component_web||[]).push([[923],{34576:function(z,R,r){r.r(R),r.d(R,{default:function(){return O}});var C=r(27424),x=r.n(C),Z=r(42122),M=r.n(Z),a=r(62435),E=r(14570),b=r(64236),B=r(42076),W=r(90482),K=r(92671),F=r(86074),U=M()({},K);function O(){var y=(0,E.pC)(),k=(0,a.useState)(!0),G=x()(k,2),w=G[0],A=G[1],L=(0,a.useRef)(E.m8.location.pathname);return(0,a.useEffect)(function(){return E.m8.listen(function(S){S.location.pathname!==L.current&&(L.current=S.location.pathname,A(!0),document.documentElement.scrollTo(0,0))})},[]),(0,F.jsx)(b.D.Provider,{value:{pkg:{name:"oulae_dumi_component_web",description:"A static site based on dumi",version:"0.0.1",license:"MIT",authors:[]},entryExports:U,demos:B.DE,components:B.wx,locales:W.k,loading:w,setLoading:A,themeConfig:{footer:'Copyright \xA9 2023 | Powered by <a href="https://d.umijs.org" target="_blank" rel="noreferrer">dumi</a>',prefersColor:{default:"light",switch:!0},name:"oulae_dumi_component_web"}},children:y})}},92671:function(z,R,r){r.r(R),r.d(R,{RelationComponent:function(){return ne}});var C=r(90783),x=r(22920),Z=r(68775),M=r(62435),a=r(86074),E=C.Z.Option,b=function(e){var o=e.data,d=e.pos,m=e.onChange,s=e.keyMap,g=e.handleMap,c=e.valueMap,h=e.defaultValueStatus,u=o.key,v=o.op,f=o.value,p=function(t){typeof m=="function"&&m(t)},N=function(t){p({key:t})},I=function(t){p({op:t})},V=function(t){p({value:t.target.value})},_=function(t){p({value:t})},l=function(){var t;return u?(t=c[u])!==null&&t!==void 0&&t.length?(0,a.jsx)(x.Z.Item,{name:["relations_validate",d,"value_value"],initialValue:f,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u503C"}],style:{marginRight:"6px"},children:(0,a.jsx)(C.Z,{placeholder:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u503C",onChange:_,children:c[u].map(function(T,D){return(0,a.jsx)(E,{value:T.value,children:T.label},D)})})}):(0,a.jsx)(x.Z.Item,{name:["relations_validate",d,"value_value"],initialValue:f,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u64CD\u4F5C\u503C"}],style:{marginRight:"6px"},children:(0,a.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165\u64CD\u4F5C\u503C",value:f,onChange:V})}):null};return(0,M.useEffect)(function(){h&&p({key:s[0].value,op:g[0].value})},[]),(0,a.jsxs)("div",{className:"term",children:[(0,a.jsx)("span",{className:"element",children:(0,a.jsx)(x.Z.Item,{name:["relations_validate",d,"element_value"],initialValue:u,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6761\u4EF6"}],style:{marginRight:"6px"},children:(0,a.jsx)(C.Z,{placeholder:"\u8BF7\u9009\u62E9\u6761\u4EF6\u9879",onChange:N,children:s.map(function(n,t){return(0,a.jsx)(E,{value:n.value,children:n.label},t)})})})}),(0,a.jsx)("span",{className:"comparison",children:(0,a.jsx)(x.Z.Item,{name:["relations_validate",d,"comparison_value"],initialValue:v,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5173\u7CFB\u7B26"}],style:{marginRight:"6px"},children:(0,a.jsx)(C.Z,{placeholder:"\u8BF7\u9009\u62E9\u5173\u7CFB\u7B26",onChange:I,children:g.map(function(n,t){return(0,a.jsx)(E,{value:n.value,children:n.label},t)})})})}),(0,a.jsx)("span",{className:"value",children:l()})]})};b.defaultProps={defaultValueStatus:!1};var B=b,W=r(27424),K=r.n(W),F=r(12902),U=r(42122),O=r.n(U),y=r(76260),k=function(e){var o=e.data,d=e.pos,m=e.setElementTerm,s=e.onDeleteTerm,g=e.onTermChange,c=function(){typeof s=="function"&&s(d,o)},h=function(v){typeof g=="function"&&g(d,O()(O()({},o),v))};return typeof m!="function"?(console.error("setElementTerm \u5C5E\u6027\u5FC5\u987B\u8BBE\u7F6E\uFF0C\u4E14\u5FC5\u987B\u662F\u8FD4\u56DE ReactElement \u7684Function"),null):(0,a.jsxs)("div",{className:"vui-relation-item",children:[m(o,d,h),(0,a.jsx)(y.ZP,{type:"primary",danger:!0,onClick:c,className:"delete-term",children:"\u5220\u9664"})]})},G=k,w=C.Z.Option,A="_",L=[{label:"\u6216",value:"and"},{label:"\u4E14",value:"or"}],S=function i(e){var o=e.data,d=e.pos,m=e.setElementTerm,s=e.onAddGroup,g=e.onAddTerm,c=e.onOpsChange,h=e.onDeleteTerm,u=e.onTermChange,v=function(){var n=$(d),t=o.children;return n.push(String(t.length-1)),n.join(A)},f=function(n){typeof c=="function"&&c(d,O()(O()({},o),{},{ops:n}))},p=function(){var n={},t=v();typeof g=="function"&&g(t,n)},N=function(){var n={ops:P.AND,children:[{}]},t=v();typeof s=="function"&&s(t,n)},I=o.children,V=o.ops,_=V||P.AND;return console.log("RelationGroup data: ",o),(0,a.jsxs)("div",{className:"vui-relation-group",children:[(0,a.jsx)("div",{className:"relational",children:(0,a.jsx)(C.Z,{className:"relation-sign",value:_,onChange:f,children:L.map(function(l,n){return(0,a.jsx)(w,{value:l.value,children:l.label},n)})})}),(0,a.jsxs)("div",{className:"conditions",children:[I.map(function(l,n){var t=l,T=t.children,D=H(d,n);return T&&T.length?(0,a.jsx)(i,{pos:D,data:l,setElementTerm:m,onAddGroup:s,onAddTerm:g,onOpsChange:c,onDeleteTerm:h,onTermChange:u},D):(0,a.jsx)(G,{pos:D,data:l,setElementTerm:m,onDeleteTerm:h,onTermChange:u},D)}),(0,a.jsxs)("div",{className:"operators",children:[(0,a.jsx)(y.ZP,{type:"primary",className:"add-term",onClick:p,children:"\u52A0\u6761\u4EF6"}),(0,a.jsx)(y.ZP,{type:"primary",className:"add-group",onClick:N,children:"\u52A0\u6761\u4EF6\u7EC4"})]})]})]})},H=function(e,o){return e?"".concat(e).concat(A).concat(o):String(o)},$=function(e){return e&&e.split(A)||[]},J=S,P;(function(i){i.AND="and",i.OR="or"})(P||(P={}));var j;(function(i){i.addGroup="addGroup",i.addTerm="addTerm",i.changeOps="changeOps",i.deleteTerm="deleteTerm",i.changeTerm="changeTerm"})(j||(j={}));var Q={ops:P.AND,children:[{}]},X=function(e){var o=e.value,d=e.onValueChange,m=e.setElementTerm,s=e.fromItemOnChange,g=(0,M.useState)(o||Q),c=K()(g,2),h=c[0],u=c[1];(0,M.useEffect)(function(){s&&s(h)},[h]);var v=function(l,n,t){var T=Y(h,l,t,n);typeof d=="function"&&d(T,t,n),u(T)},f=function(l,n){v(l,n,j.addGroup)},p=function(l,n){v(l,n,j.addTerm)},N=function(l,n){v(l,n,j.changeOps)},I=function(l,n){v(l,n,j.deleteTerm)},V=function(l,n){v(l,n,j.changeTerm)};return(0,a.jsx)("div",{className:"vui-relation-tree",children:(0,a.jsx)(J,{pos:"",data:h,setElementTerm:m,onAddGroup:f,onAddTerm:p,onOpsChange:N,onDeleteTerm:I,onTermChange:V})})},Y=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0;if(!o)return m;var s=$(o),g=s.length-1;return(0,F.ZP)(e,function(c){var h={data:c,idx:0},u=c.children||[];s.forEach(function(v,f){var p=Number(v);if(f===g)switch(d){case"addTerm":case"addGroup":u.splice(p+1,0,m);break;case"deleteTerm":u.splice(p,1),u.length||h.data.splice(h.idx,1);break;default:u[p]=m}else h={data:u,idx:p},u=u[p]&&u[p].children||[]})})},q=X,ee=function(e){var o=e.keyMap,d=e.handleMap,m=e.value,s=e.valueMap,g=e.onValueChange,c=function(u,v,f){return(0,a.jsx)(B,{keyMap:o,handleMap:d,valueMap:s,pos:v,data:u,onChange:f})};return(0,a.jsx)(q,{value:m,onValueChange:g,fromItemOnChange:e.onChange,setElementTerm:c})},ne=ee}}]);
